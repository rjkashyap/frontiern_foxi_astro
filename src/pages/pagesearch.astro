---
/**
 * Page: Page Search (Pagefind UI embedded)
 * Path: /pagesearch
 */

// Components
import Layout from '../layouts/Layout.astro'
import SidebarContent from '../components/blocks/basic/StickySidebar.astro'
import Hero from '../components/blocks/hero/PageHeader.astro'

// SEO
const SEO = {
  title: 'Search Trips',
  description:
    'Find a mission trip by country, region, date, and type. Filter and search across our upcoming opportunities.'
}

// Page Header
const header = {
  title: 'Find a <strong>Mission Trip</strong>',
  text: 'Filter by Region, Country, Leave Date, and Trip Type.'
}
---

<Layout title={SEO.title} description={SEO.description}>
  <Hero title={header.title} text={header.text} />

  <SidebarContent>
    <!-- Sidebar -->
    <div slot="sidebar" class="space-y-4">
      <h3 class="text-xl font-semibold">Tips</h3>
      <ul class="list-disc list-inside text-sm text-muted-foreground space-y-2">
        <li>Use the filters to narrow by Region, Country, or Trip Type.</li>
        <li>Try a keyword in the search box (e.g. “Kenya” or “Teaching English”).</li>
        <li>Click a result to view full trip details.</li>
      </ul>
    </div>

    <!-- Main content -->
    <div class="basic-text">
      <!-- Container that matches your site’s spacing / cards -->
      <section class="rounded-2xl border border-gray-200/70 dark:border-white/10 bg-white/60 dark:bg-white/5 shadow-sm p-4 sm:p-6 md:p-8">
        <!-- Pagefind UI assets -->
        <link rel="stylesheet" href="/search/pagefind-ui.css" />

        <!-- keep this as a raw external script (don’t let Vite bundle it) -->
        <script src="/search/pagefind-ui.js" is:inline></script>

        <!-- Mount point -->
        <div id="trip-search" class="pagefind-wrapper"></div>

        <!-- Initialise Pagefind UI -->
        <script is:inline>
          // PagefindUI is loaded by the external script above
          if (typeof window !== "undefined" && window.PagefindUI) {
            new window.PagefindUI({
              element: "#trip-search",
              basePath: "/search/",
              // You can set a placeholder if you like:
              // translations: { placeholder: "Search trips..." }
            });
          }
        </script>
      </section>
    </div>
  </SidebarContent>
</Layout>

<style is:global>
  /* Light touch styling so the Pagefind UI sits nicely with your theme */
  .pagefind-wrapper .pagefind-ui__form {
    margin-bottom: 1rem;
  }
  .pagefind-wrapper .pagefind-ui__search-input {
    border-radius: 0.75rem;
    padding: 0.75rem 1rem;
    line-height: 1.25rem;
  }
  .pagefind-wrapper .pagefind-ui__drawer {
    border-radius: 1rem;
  }
  .pagefind-wrapper .pagefind-ui__result {
    border-radius: 0.75rem;
  }
  /* Respect dark mode if your site uses it */
  html.dark .pagefind-wrapper .pagefind-ui__form {
    background: transparent;
  }
</style>