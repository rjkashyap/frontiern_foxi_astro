---
// Enhanced Modal (Foxi-compatible)
// Covers full viewport with frosted overlay and adds responsive sizing, padding, and scroll.
import Button from './Button.astro'
import { Icon } from 'astro-icon/components'

type Props = {
	id?: string
	title?: string
	classes?: string
}
const { id, title, classes } = Astro.props
---

<div
  {...(id ? { id } : {})}
  class:list={[
    'modal',
    'fixed inset-0 z-50 flex items-center justify-center overflow-auto bg-black/40 backdrop-blur-sm transition-all duration-300',
    { [`${classes}`]: classes },
  ]}
>
  <!-- Outer container provides top/bottom breathing space -->
  <div class="relative my-8 w-full px-4 sm:px-6">
    <!-- Modal popup -->
    <div
      class="modal__popup mx-auto w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-2xl bg-white dark:bg-neutral-900 border border-neutral-100 dark:border-neutral-800 rounded-2xl shadow-xl shadow-neutral-700/10 dark:shadow-neutral-950/40 overflow-hidden"
    >
      <div class="modal__header flex items-center justify-between gap-6 border-b border-neutral-100 dark:border-neutral-800 px-6 py-3 text-lg font-medium">
        {title && <h2 class="modal__title mb-0 truncate text-lg text-neutral-900 dark:text-neutral-50">{title}</h2>}
        <Button size="sm" style="neutral" classes="modal__close" variation="link">
          <Icon name="x-mark" class="dark:text-neutral-50" />
          <span class="sr-only">Close</span>
        </Button>
      </div>

      <div class="modal__body max-h-[80vh] overflow-y-auto p-6">
        <slot />
      </div>
    </div>
  </div>
</div>

<style>
.modal {
  @apply hidden [&.open]:flex;
}
.modal__close {
  @apply !rounded-full !px-2.5;
}
</style>