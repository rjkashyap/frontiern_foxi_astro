---
import Button from './Button.astro'
import { Icon } from 'astro-icon/components'

type Props = {
  id: string
  title?: string
  classes?: string
}

const { id, title, classes } = Astro.props
---

<!-- Root container required by MicroModal -->
<div 
  id={id}
  class:list={["modal micromodal-slide", classes]}
  aria-hidden="true"
>

  <!-- Overlay â€“ MUST contain data-micromodal-close -->
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>

    <!-- Dialog -->
    <div 
      class="modal__container"
      role="dialog"
      aria-modal="true"
      aria-labelledby={`${id}-title`}
    >

      <!-- Header -->
      <header class="modal__header">
        {title && (
          <h2 class="modal__title" id={`${id}-title`}>
            {title}
          </h2>
        )}

        <Button
          size="sm"
          style="neutral"
          classes="modal__close"
          variation="link"
          data-micromodal-close
        >
          <Icon name="x-mark" />
          <span class="sr-only">Close</span>
        </Button>
      </header>

      <!-- Body -->
      <main class="modal__body" id={`${id}-content`}>
        <slot />
      </main>

    </div>
  </div>
</div>


<!-- Styles (kept close to your existing look) -->
<style>
  .modal {
    display: none;
  }
  .modal.is-open {
    display: block;
  }

  .modal__overlay {
    @apply fixed inset-0 bg-white/50 dark:bg-neutral-900/60 flex items-center justify-center;
  }

  .modal__container {
    @apply mx-6 w-[80vw] md:w-[50vw] max-w-full max-h-[80vh]
           bg-white dark:bg-neutral-900 text-neutral-700 dark:text-neutral-200
           rounded shadow-xl overflow-hidden;
  }

  .modal__header {
    @apply flex items-center justify-between px-6 py-4 border-b border-neutral-200 dark:border-neutral-700;
  }

  .modal__title {
    @apply text-lg font-semibold;
  }

  .modal__body {
    @apply px-6 py-6 overflow-y-auto;
  }

  .modal__close {
    @apply !rounded-full !px-2.5;
  }
</style>
