---
/*
// Basic Card
// ------------
// Description: The basic card component
// Properties:
// - Title: the title of the card
// - Subtitle: the subtitle of the card
// - TitleSize: the size of the title
// - Image: the main image of the card
// - Icon: the icon of the card
// - Link: If provided, the card will be a link
// - Type: Image-top or Image-bottom (refers to the image position)
// - classes: extra classes
// Reference: https://wind-ui.com/components/cards/
*/

import { Image } from 'astro:assets'
import { Icon } from 'astro-icon/components'
import Card from './partials/Card.astro'
import CardBody from './partials/CardBody.astro'

type Props = {
  title?: string
  subtitle?: string
  titleSize?: 'sm' | 'base' | 'lg' | 'xl'
  image?: any
  icon?: string
  link?: string
  type?: 'image-top' | 'image-bottom'
  classes?: string
}
const { title = '', subtitle, titleSize = 'lg', image, icon, link, type, classes } = Astro.props
---

<Card classes={classes} link={link}>
  {image && (
    <div class:list={['card__media', type === 'image-bottom' ? 'order-2' : '']}>
      <!-- Padding wrapper adds space from card border; bg inherits -->
      <div class="card__media-inner">
        <!-- Use object-contain so the SVG/image is never cropped -->
        <Image
          src={image}
          alt={title}
          width={600}
          height={400}
          class="card__img"
        />
      </div>
    </div>
  )}

  {icon && (
    <div class="px-6 pt-6">
      <Icon name={`${icon}`} class="card__icon" />
    </div>
  )}

  <CardBody>
    {title && <h3 class:list={[['text-' + `${titleSize} ` + `lg:text` + `${titleSize}`]]}>{title}</h3>}
    {subtitle && <p>{subtitle}</p>}
    <slot />
  </CardBody>
</Card>

<style>
  .card__icon {
    @apply inline-block size-6 shrink-0 text-primary-500;
  }

  /* Image wrapper: adds padding so the graphic doesnâ€™t touch the card edge */
  .card__media-inner {
    @apply p-4 pt-4 pb-0; /* bottom can be tight since text follows */
  }

  /* Ensure image never crops and scales down nicely inside its padded box */
  .card__img {
    @apply w-full h-auto object-contain;
    /* For raster images that could be huge, keep a sensible max-height
       without forcing crop. Tweak if you want smaller/larger thumbnails. */
    max-height: 12rem; /* ~192px */
  }

  /* Optional: if you want stricter equal heights without cropping,
     you can give the outer media a min-height and let object-contain do the rest.
     Leaving it out by default to avoid layout jumps. */
  /* .card__media { @apply min-h-[8rem]; } */
</style>