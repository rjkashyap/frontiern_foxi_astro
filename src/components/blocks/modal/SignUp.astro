---
// Signup Modal (Contact Form version)
// Foxi overlay, blur, centering, animation preserved
// Adds scroll lock, improved spacing, responsive width, and Foxi-style scrollbar

import Modal from '../../ui/Modal.astro'
import Form from '../../ui/forms/Form.astro'
import FormField from '../../ui/forms/partials/FormField.astro'
import InputField from '../../ui/forms/form-elements/InputField.astro'
import TextArea from '../../ui/forms/form-elements/TextArea.astro'
import Button from '../../ui/Button.astro'

type Props = { classes?: string }
const { classes } = Astro.props
---

<Modal id="signup" classes={classes} title="Contact Us">
  <!-- Wider, padded, scrollable inner container -->
  <div class="mx-auto w-full max-w-5xl my-8 sm:my-10 px-4 sm:px-8 max-h-[calc(100vh-6rem)] overflow-y-auto">
    <p class="mb-6 text-base leading-relaxed text-neutral-600 dark:text-neutral-300">
      Tell us a bit about your enquiry and we'll get back to you.
    </p>

    <Form>
      <FormField>
        <InputField type="text" id="firstName" label="First Name" />
        <InputField type="text" id="lastName" label="Last Name" />
      </FormField>

      <FormField>
        <InputField type="email" id="email" label="Email" required value="name@youremail.com" />
      </FormField>

      <FormField>
        <InputField type="tel" id="phone" label="Phone Number" />
      </FormField>

      <FormField>
        <TextArea id="message" label="Your Message" />
      </FormField>

      <div class="mt-6 text-center">
        <Button style="primary" type="submit" size="lg">
          Send Message
        </Button>
      </div>
    </Form>
  </div>
</Modal>

<style>
  /* Keep Foxi typography and form rhythm */
  .modal__body form {
    @apply space-y-4;
  }

  .modal__popup {
    @apply transition-transform duration-500 ease-out;
  }

  /* --- Modern Foxi scrollbar (matches global style) --- */
  .modal__body::-webkit-scrollbar {
    width: 6px;
  }
  .modal__body::-webkit-scrollbar-thumb {
    @apply bg-neutral-200 dark:bg-neutral-700 rounded-full;
  }
  .modal__body::-webkit-scrollbar-thumb:hover {
    @apply bg-neutral-300 dark:bg-neutral-600;
  }
  .modal__body {
    scrollbar-width: thin;
    scrollbar-color: rgba(180, 180, 180, 0.5) transparent;
  }

  /* --- Scroll lock when modal is open --- */
  body.modal-open {
    overflow: hidden;
  }
</style>

<script is:inline>
  // Lock background scroll while modal is open
  document.addEventListener('astro:page-load', () => {
    const modals = document.querySelectorAll('.modal');
    modals.forEach((modal) => {
      const observer = new MutationObserver(() => {
        if (modal.classList.contains('open')) {
          document.body.classList.add('modal-open');
        } else {
          document.body.classList.remove('modal-open');
        }
      });
      observer.observe(modal, { attributes: true, attributeFilter: ['class'] });
    });
  });
</script>